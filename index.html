<!DOCTYPE html>
<html>
<head>
    <title>Satellite Loop</title>
    <style>
        body { 
            background-color: black; 
            margin: 0; 
            height: 100vh; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            overflow: hidden;
        }
        img {
            height: 100%;
            width: 100%;
            object-fit: contain; /* Keeps aspect ratio so map doesn't stretch */
        }
        /* Refresh bar at bottom to show it's working */
        #status {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0%;
            height: 4px;
            background: #00FF00;
            opacity: 0.5;
            transition: width 1s linear;
        }
    </style>
</head>
<body>
    <img id="satLoop" src="" alt="Loading Weather Data..." onerror="tryBackup()" />
    <div id="status"></div>

    <script>
        // PRIMARY: GOES-19 (The new East Coast Standard as of 2025)
        const url_primary = "https://cdn.star.nesdis.noaa.gov/GOES19/ABI/GIFS/GOES19-CONUS-GeoColor.gif";
        
        // BACKUP: GOES-16 (Old standard, use if Primary is black)
        const url_backup = "https://cdn.star.nesdis.noaa.gov/GOES16/ABI/GIFS/GOES16-CONUS-GeoColor.gif";

        const img = document.getElementById("satLoop");
        const bar = document.getElementById("status");
        
        function updateImage() {
            // We add a random number (?v=...) to the end of the URL.
            // This forces the TV to re-download the new image instead of showing the old cached one.
            const timestamp = new Date().getTime();
            img.src = url_primary + "?v=" + timestamp;
            
            // Reset loading bar
            bar.style.width = "0%";
            setTimeout(() => { bar.style.width = "100%"; }, 100);
        }

        function tryBackup() {
            console.log("Primary failed, trying backup satellite...");
            const timestamp = new Date().getTime();
            img.src = url_backup + "?v=" + timestamp;
        }

        // Run immediately
        updateImage();

        // Refresh the loop every 10 minutes (600,000 ms)
        setInterval(updateImage, 600000);
    </script>
</body>
</html>
